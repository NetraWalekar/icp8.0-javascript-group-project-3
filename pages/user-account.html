<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Account</title>
    <link rel="stylesheet" href="/css/user-account.css">
</head>
<body>
    <nav class="navbar">
        <div class="navdiv">
            <div class="logo">
                <a href="/index.html"><img src="/images/icons/home-logo/head-logo.png" alt="Logo"></a>
            </div>
            <ul class="nav-links">
                <li><a href="/index.html">Home</a></li>
                <li><a href="/pages/categories.html">Categories</a></li>
                <li><a href="/pages/about-us.html">About Us</a></li>
                <li><a href="/pages/contactus.html">Contact Us</a></li>
            </ul>
            <div class="sign">
                <button class="signin-button"><a href="/pages/signin.html">Sign In</a></button>
                <div class="profile-container" id="profile-container">
                    <a href="/pages/user-account.html"><img src="/images/icons/home-logo/user.png" height="33px" alt="Profile" class="profile-icon" id="profile-icon"></a>
                    <span class="profile-text" id="profile-text"></span>
                </div>
                <div class="cart-container" id="cart-container">
                    <a href="#"><img src="/images/icons/home-logo/shopping-cart.png" height="33px" alt="Cart" class="cart-icon" id="cart-icon"></a>
                    <span class="cart-text" id="cart-text"></span>
                </div>
            </div>
        </div>
    </nav>
    <div class="sidebar">
        <ul>
            <li><a href="#" id="profileLink"><img src="/images/user account/user-picture.png" alt="Profile Icon"> User Profile</a></li>
            <li><a href="#" id="changePasswordLink"><img src="/images/user account/reset-password.png" alt="Password Icon"> Change Password</a></li>
            <li><a href="#" id="changeInfoLink"><img src="/images/user account/information.png" alt="Info Icon"> Change Information</a></li>
            <li><a href="#" id="logoutButton"><img src="/images/user account/logout (1).png" alt="Logout Icon"> Logout</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Welcome, <span id="displayName"></span>!</h1>
        <img id="userImage" src="/images/user account/profile.png" alt="User Image">
        <p><b style="font-size: 19px;">Full Name: </b><span id="fullName"></span></p>
        <p><b style="font-size: 19px;">Username: </b><span id="username"></span></p>
        <p><b style="font-size: 19px;">Email: </b><span id="email"></span></p>
        
        <div id="changeInfoForm" style="display: none;">
            <h2>Change Information</h2>
            <input type="text" id="newFullName" placeholder="New Full Name"><br>
            <input type="text" id="newUsername" placeholder="New Username"><br>
            <input type="email" id="newEmail" placeholder="New Email"><br>
            <button id="saveInfoButton">Save Changes</button>
        </div>

        <div id="changePasswordForm" style="display: none;">
            <h2>Change Password</h2>
            <input type="password" id="oldPassword" placeholder="Old Password"><br>
            <input type="password" id="newPassword" placeholder="New Password"><br>
            <input type="password" id="confirmNewPassword" placeholder="Confirm New Password"><br>
            <button id="savePasswordButton">Change Password</button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fullName = localStorage.getItem('userFullName');
            const username = localStorage.getItem('username');
            const email = localStorage.getItem('userEmail');
            const storedPassword = localStorage.getItem('userPassword');

            document.getElementById('displayName').textContent = username;
            document.getElementById('fullName').textContent = fullName;
            document.getElementById('username').textContent = username;
            document.getElementById('email').textContent = email;

            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton) {
                logoutButton.addEventListener('click', function() {
                    localStorage.clear();
                    window.location.href = '/pages/signin.html';
                });
            }

            const changeInfoLink = document.getElementById('changeInfoLink');
            const changeInfoForm = document.getElementById('changeInfoForm');
            const saveInfoButton = document.getElementById('saveInfoButton');

            if (changeInfoLink) {
                changeInfoLink.addEventListener('click', function() {
                    changeInfoForm.style.display = 'block';
                    document.getElementById('changePasswordForm').style.display = 'none';
                });
            }

            if (saveInfoButton) {
                saveInfoButton.addEventListener('click', function() {
                    const newFullName = document.getElementById('newFullName').value;
                    const newUsername = document.getElementById('newUsername').value;
                    const newEmail = document.getElementById('newEmail').value;

                    if (newFullName) {
                        localStorage.setItem('userFullName', newFullName);
                        document.getElementById('fullName').textContent = newFullName;
                    }
                    if (newUsername) {
                        localStorage.setItem('username', newUsername);
                        document.getElementById('username').textContent = newUsername;
                        document.getElementById('displayName').textContent = newUsername;
                    }
                    if (newEmail) {
                        localStorage.setItem('userEmail', newEmail);
                        document.getElementById('email').textContent = newEmail;
                    }

                    changeInfoForm.style.display = 'none';
                });
            }

            const changePasswordLink = document.getElementById('changePasswordLink');
            const changePasswordForm = document.getElementById('changePasswordForm');
            const savePasswordButton = document.getElementById('savePasswordButton');

            if (changePasswordLink) {
                changePasswordLink.addEventListener('click', function() {
                    changePasswordForm.style.display = 'block';
                    document.getElementById('changeInfoForm').style.display = 'none';
                });
            }

            if (savePasswordButton) {
                savePasswordButton.addEventListener('click', function() {
                    const oldPassword = document.getElementById('oldPassword').value;
                    const newPassword = document.getElementById('newPassword').value;
                    const confirmNewPassword = document.getElementById('confirmNewPassword').value;

                    if (oldPassword !== storedPassword) {
                        alert('Old password is incorrect!');
                        return;
                    }
                    if (newPassword !== confirmNewPassword) {
                        alert('New passwords do not match!');
                        return;
                    }

                    localStorage.setItem('userPassword', newPassword);
                    alert('Password changed successfully!');
                    changePasswordForm.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>

