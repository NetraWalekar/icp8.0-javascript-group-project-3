<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Account</title>
    <link rel="stylesheet" href="/css/user-account.css">
</head>
<body>
    <div class="sidebar">
        <ul>
            <li><a href="#" id="profileLink"><img src="/images/user account/user.png" alt="Profile Icon"> User Profile</a></li>
            <li><a href="#" id="changePasswordLink"><img src="/images/user account/password.png" alt="Password Icon"> Change Password</a></li>
            <li><a href="#" id="changeInfoLink"><img src="/images/user account/info.png" alt="Info Icon"> Change Information</a></li>
            <li><a href="#" id="logoutButton"><img src="/images/user account/logout.png" alt="Logout Icon"> Logout</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Welcome, <span id="displayName"></span>!</h1>
        <img id="userImage" src="/images/user account/user.png" alt="User Image">
        <p>Full Name: <span id="fullName"></span></p>
        <p>Username: <span id="username"></span></p>
        <p>Email: <span id="email"></span></p>
        <div id="changeInfoForm" style="display: none;">
            <h2>Change Information</h2>
            <input type="text" id="newFullName" placeholder="New Full Name"><br>
            <input type="text" id="newUsername" placeholder="New Username"><br>
            <input type="email" id="newEmail" placeholder="New Email"><br>
            <button id="saveInfoButton">Save Changes</button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const fullName = localStorage.getItem('userFullName');
            const username = localStorage.getItem('username');
            const email = localStorage.getItem('userEmail');

            document.getElementById('displayName').textContent = username;
            document.getElementById('fullName').textContent = fullName;
            document.getElementById('username').textContent = username;
            document.getElementById('email').textContent = email;

            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton) {
                logoutButton.addEventListener('click', function() {
                    localStorage.clear();
                    window.location.href = '/pages/signin.html';
                });
            }

            const changeInfoLink = document.getElementById('changeInfoLink');
            const changeInfoForm = document.getElementById('changeInfoForm');
            const saveInfoButton = document.getElementById('saveInfoButton');

            if (changeInfoLink) {
                changeInfoLink.addEventListener('click', function() {
                    changeInfoForm.style.display = 'block';
                });
            }

            if (saveInfoButton) {
                saveInfoButton.addEventListener('click', function() {
                    const newFullName = document.getElementById('newFullName').value;
                    const newUsername = document.getElementById('newUsername').value;
                    const newEmail = document.getElementById('newEmail').value;

                    if (newFullName) {
                        localStorage.setItem('userFullName', newFullName);
                        document.getElementById('fullName').textContent = newFullName;
                    }
                    if (newUsername) {
                        localStorage.setItem('username', newUsername);
                        document.getElementById('username').textContent = newUsername;
                        document.getElementById('displayName').textContent = newUsername;
                    }
                    if (newEmail) {
                        localStorage.setItem('userEmail', newEmail);
                        document.getElementById('email').textContent = newEmail;
                    }

                    changeInfoForm.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>
